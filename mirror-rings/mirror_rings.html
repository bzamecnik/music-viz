<html>

<head>
  <style>
    .node circle {
      fill: #eee;
      stroke: gray;
      stroke-width: 5;
    }
    .edge {
      stroke: gray;
      stroke-width: 5;
    }

    .inside circle, .inside.edge {
      stroke: #9d9;
      fill: #efe;
    }
    .inside text {
      fill: #060;
    }

    .outside circle, .outside.edge {
      stroke: #d99;
      fill: #fee;
    }
    .outside text {
      fill: #600;
    }

    .between circle, .between.edge {
      stroke: #dc9;
      fill: #fafaea;
    }
    .between text {
      fill: #660;
    }

    .node text {
      text-anchor: middle;
      alignment-baseline: middle;
      font-family: sans-serif;
      font-size: 30px;
    }

  </style>
</head>

<body>
    <svg class="chart">
    </svg>

<svg class="chart"></svg>
<script src="d3.v3.min.js" charset="utf-8"></script>
<script>
    var chart = d3.select(".chart")
      .attr("width", 900)
      .attr("height", 600);

    var radius = 40;
    var step = 3 * radius;

    var pcs = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];

    // nodes:
    // grid X, grid Y, class
    var nodes = [
        [0, 0, 'inside'],
        [3, 0, 'outside'],
        [1, 1, 'inside'],
        [3, 2, 'outside'],
        [0, 2, 'inside'],
        [2, 0, 'between'],
        [4, 2, 'outside'],
        [1, 2, 'inside'],
        [3, 1, 'outside'],
        [1, 0, 'inside'],
        [4, 0, 'outside'],
        [2, 2, 'between']
      ];
    // source node, destination node, class
    var edges = [
      [0, 9, 'inside'],
      [9, 5, 'inside'],
      [5, 8, 'outside'],
      [8, 11, 'outside'],
      [11, 2, 'inside'],
      [2, 5, 'inside'],
      [5, 1, 'outside'],
      [1, 10, 'outside'],
      [10, 6, 'outside'],
      [6, 3, 'outside'],
      [3, 11, 'outside'],
      [11, 7, 'inside'],
      [7, 4, 'inside'],
      [4, 0, 'inside']
    ]

    function gridPosition(x) {
      return (x + 0.5) * step;
    }

    chart.selectAll(".edge")
      .data(edges)
      .enter()
      .append("line")
      .attr("x1", function(d, i) {
        return gridPosition(nodes[d[0]][0]);
      })
      .attr("y1", function(d, i) {
        return gridPosition(nodes[d[0]][1]);
      })
      .attr("x2", function(d, i) {
        return gridPosition(nodes[d[1]][0]);
      })
      .attr("y2", function(d, i) {
        return gridPosition(nodes[d[1]][1]);
      })
      .attr("class", function(d,i) {
        return "edge " + d[2];
      });

    var nodeContainers = chart.selectAll(".node")
      .data(nodes)
      .enter()
      .append("g")
      .attr("class", function(d,i) {
        return "node " + d[2];
      })
      .attr("transform", function(d, i) {
        var x = gridPosition(d[0]);
        var y = gridPosition(d[1]);
        return "translate(" + x + ", " + y + ")";
      });
    nodeContainers.append("circle")
      .attr("r", radius);
    nodeContainers.append("text")
      .text(function(d,i) {
        return pcs[i % 12];
      });

</script>
</body>
<html>
